---
title: "PRoject"
output:
  word_document: default
  html_document: default
  pdf_document: default
subtitle: 
author: sophie and Diya
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(car)
library(leaps)
myResPlots <- function(model, label){
  
  #Normal quantile plot of studentized residuals
  qqPlot(rstudent(model), pch = 19, main = paste("NQ Plot of Studentized Residuals,", label))
  
  #plot of fitted vs. studentized residuals
  plot(rstudent(model) ~ model$fitted.values, pch = 19, col = 'red', xlab = "Fitted Values", ylab = "Studentized Residuals",
     main = paste("Fits vs. Studentized Residuals,", label))
  abline(h = 0, lwd = 3)
  abline(h = c(2,-2), lty = 2, lwd = 2, col="blue")
  abline(h = c(3,-3), lty = 2, lwd = 2, col="green")

}
```

This assignment uses data from the Anime Recommendation Database 2020 on Kaggle, based on stats on myanimelist.

```{r}
anime <- read.csv("https://github.com/diyamagnetism/Stats230/raw/refs/heads/main/anime.csv")
dim(anime)
names(anime)
head(anime)



```

```{r}

library(tidyr)

anime[anime == "Unknown"] <- NA

anime$Genres

anime$Genres <- gsub("Hentai|Ecchi|Harem", "Explicit", anime$Genres)

anime$Genres <- gsub("Yuri|Yaoi|Shounen Ai|Shoujo Ai", "LGBT", anime$Genres)

anime$Genres <- gsub("Dementia", "Psychological", anime$Genres)

anime$Genres <- gsub("Demons|Magic|Supernatural|Super Power|Vampire", "Fantasy", anime$Genres)

anime$Genres <- gsub("Space|Mecha", "Sci-Fi", anime$Genres)
anime$Genres <- gsub("Military|Cars|Police|Martial Arts", "Action", anime$Genres)
anime$Genres <- gsub("Samurai", "Historical", anime$Genres)
anime$Genres <- gsub("Parody", "Comedy", anime$Genres)


anime2 <- anime[, c("Name", "Score", "Type", "Episodes", "Aired", "Studios", "Source", "Duration", "Rating", "Popularity", "Members", "Favorites", "Dropped", "Plan.to.Watch", "Score.10", "Score.9", "Score.8", "Score.7", "Score.6", "Score.5", "Score.4", "Score.3", "Score.2", "Score.1")]

#anime2 <- separate_longer_delim(anime2, Genres, delim=",")

genres_split <- strsplit(anime$Genres, ",\\s*")
table(unlist(genres_split))
unique_genres <- sort(unique(unlist(genres_split)))
unique_genres

unknown_rows <- anime[apply(anime, 1, function(row) any(row == "Unknown")), ]
print(unknown_rows)

for (genre in unique_genres){
  anime2[[genre]] <- sapply(genres_split, function(x) as.integer(genre %in% x))
}

head(anime2)
table(anime2$Type)

#anime2$Aired clean this
#anime2$AiredDecade make this
#anime2$Duration clean this
#anime2$TotalDuration make this
#table(anime2$Rating) change names
#table(anime2$Source) clean this

names(anime2)



```




```{r}
table(anime$Genres)

```
